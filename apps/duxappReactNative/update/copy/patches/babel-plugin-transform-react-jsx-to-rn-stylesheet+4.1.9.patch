diff --git a/node_modules/babel-plugin-transform-react-jsx-to-rn-stylesheet/dist/index.js b/node_modules/babel-plugin-transform-react-jsx-to-rn-stylesheet/dist/index.js
index 3ed8bed..e7969a7 100644
--- a/node_modules/babel-plugin-transform-react-jsx-to-rn-stylesheet/dist/index.js
+++ b/node_modules/babel-plugin-transform-react-jsx-to-rn-stylesheet/dist/index.js
@@ -36,7 +36,11 @@ const MERGE_ELE_STYLES_FUNC_NAME = '_mergeEleStyles';
 const GET_MODULE_CLS_NAME_FUNC_NAME = '_getModuleClassName';
 const GET_CLS_NAME_FUNC_NAME = '_getClassName';
 const NAME_SUFFIX = 'styleSheet';
+const duxappConfig = require(path.join(process.cwd(), 'dist', 'duxapp.json'));
+const USE_THEME_FUNC_NAME = 'useDuxappThemeMerge_';
+const USE_THEME_MODE_NAME = '_duxappThemeMode';
 const RN_CSS_EXT = ['.css', '.scss', '.sass', '.less', '.styl', '.stylus'];
+const isThemeChange = Object.keys(duxappConfig.themeConfig.themes).length > 1;
 const isStyle = value => {
     const ext = path.extname(value);
     return RN_CSS_EXT.indexOf(ext) > -1;
@@ -80,6 +84,9 @@ function findLastImportIndex(body) {
 }
 const MergeStylesFunction = `
 function ${MERGE_STYLES_FUNC_NAME}() {
+  if (arguments.length === 1) {
+    return arguments[0][0];
+  }
   var newTarget = {};
   for (var index = 0; index < arguments.length; index++) {
     var [styleSheet, rawStyleName] = arguments[index];
@@ -143,12 +150,25 @@ function ${GET_MODULE_CLS_NAME_FUNC_NAME}(moduleStyle, styleId) {
   ), {})
 }
 `;
+const useThemeFunction = `
+function ${USE_THEME_FUNC_NAME}(...styles) {
+  const mode = duxappTheme_.useMode()
+
+  duxappTheme_.useMemo(() => {
+    if (${USE_THEME_MODE_NAME} !== mode) {
+      ${STYLE_SHEET_NAME} = ${MERGE_STYLES_FUNC_NAME}(...styles.map(item => typeof item[0] === 'function' ? [item[0](mode), item[1]]: item))
+      ${USE_THEME_MODE_NAME} = mode
+    }
+  }, [mode])
+}
+`;
 function default_1(babel) {
     const { types: t, template } = babel;
     const getClassNameFunctionStmt = template(getClassNameFunction)();
     const getStyleFunctionStmt = template(getStyleFunction)();
     const getMergeEleStyleFunctionStmt = template(getMergeEleStyleFunction)();
     const getModuleClassNameFunctionStmt = template(getModuleClassNameFunction)();
+    const useThemeFunctionStmt = template(useThemeFunction)();
     function getMap(str) {
         return str.split(/\s+/).map((className) => {
             // return template(`${STYLE_SHEET_NAME}["${className}"]`)().expression
@@ -300,6 +320,112 @@ function default_1(babel) {
             }
         }
     }
+    // 主题函数开始
+    function getFunctionName(path) {
+        const { node } = path;
+        if (t.isFunctionDeclaration(node) && node.id) {
+            return node.id.name;
+        }
+        if (t.isFunctionExpression(node) && node.id && /^[A-Z]/.test(node.id.name)) {
+            return node.id.name;
+        }
+        if (t.isVariableDeclarator(path.parent) && t.isIdentifier(path.parent.id)) {
+            return path.parent.id.name;
+        }
+        if (t.isAssignmentExpression(path.parent) && t.isIdentifier(path.parent.left)) {
+            const name = path.parent.left.name;
+            if (name[0] === '_') {
+                return null;
+            }
+            return name;
+        }
+        return null;
+    }
+    function containsJSXWithClassNameAndNoClass(path) {
+        let hasClassName = false;
+        let hasClassCallCheck = false;
+        path.traverse({
+            JSXAttribute(attrPath) {
+                if (t.isJSXIdentifier(attrPath.node.name, { name: 'className' })) {
+                    hasClassName = true;
+                    attrPath.stop();
+                }
+            },
+            CallExpression(callPath) {
+                const { callee } = callPath.node;
+                if (t.isIdentifier(callee, { name: '_classCallCheck' }) ||
+                    (t.isMemberExpression(callee) &&
+                        t.isIdentifier(callee.object, { name: '_classCallCheck' }))) {
+                    hasClassCallCheck = true;
+                    callPath.stop();
+                }
+            }
+        });
+        return hasClassName && !hasClassCallCheck;
+    }
+    const REACT_HOC_NAMES = new Set([
+        'memo',
+        'forwardRef',
+        'lazy'
+    ]);
+    function isWrappedByReactHOC(path) {
+        let currentPath = path;
+        while (currentPath) {
+            const parent = currentPath.parentPath;
+            if (!parent)
+                break;
+            if (parent.isCallExpression() &&
+                parent.node.arguments.includes(currentPath.node)) {
+                const callee = parent.node.callee;
+                if ((t.isIdentifier(callee) && REACT_HOC_NAMES.has(callee.name)) ||
+                    (t.isMemberExpression(callee) &&
+                        t.isIdentifier(callee.object, { name: 'React' }) &&
+                        t.isIdentifier(callee.property) &&
+                        REACT_HOC_NAMES.has(callee.property.name))) {
+                    return true;
+                }
+            }
+            if (parent.isAssignmentExpression() &&
+                parent.node.right === currentPath.node) {
+                currentPath = parent;
+                continue;
+            }
+            if (parent.isVariableDeclarator() &&
+                parent.node.init === currentPath.node) {
+                currentPath = parent;
+                continue;
+            }
+            break;
+        }
+        return false;
+    }
+    function tryInsertHook(path, state) {
+        if (!isThemeChange)
+            return;
+        const name = getFunctionName(path);
+        if (name && !/^[A-Z]/.test(name))
+            return;
+        if (!name && !isWrappedByReactHOC(path))
+            return;
+        if (!containsJSXWithClassNameAndNoClass(path))
+            return;
+        const { file } = state;
+        const styleSheetIdentifiers = file.get('styleSheetIdentifiers') || [];
+        const cssModuleStylesheets = file.get('cssModuleStylesheets') || [];
+        const allStyleSheetIdentifiers = [...styleSheetIdentifiers, ...cssModuleStylesheets];
+        if (!allStyleSheetIdentifiers.length) {
+            return;
+        }
+        const params = allStyleSheetIdentifiers.reduce((current, next) => `${current},[${next.styleSheetName}, "${next.rawStyleSheetName || ''}"]`, '').slice(1);
+        const hookNode = template.ast(`
+        ${USE_THEME_FUNC_NAME}(${params});
+      `);
+        const bodyPath = path.get('body');
+        if (bodyPath && bodyPath.node && Array.isArray(bodyPath.node.body)) {
+            bodyPath.unshiftContainer('body', hookNode);
+        }
+    }
+    // 主题函数结束
     let existStyleImport = false;
     return {
         name: 'transform-react-jsx-to-rn-stylesheet',
@@ -314,27 +440,37 @@ function default_1(babel) {
                                 // 在 Program 最开始处理 import 样式
                                 // 防止有些插件在入口对 import 进行处理，比如 @babel/plugin-transform-typescript 会进行删除
                                 importDeclaration(stmt, state, t);
+                                const themeImport = t.importDeclaration([
+                                    t.importSpecifier(t.identifier('duxappTheme_'), t.identifier('theme'))
+                                ], t.stringLiteral(path.resolve(process.cwd(), 'src/duxapp/utils/theme')));
+                                astPath.unshiftContainer('body', themeImport);
                             }
                             lastImportAstPath = stmt;
                         }
                     }
                     if (existStyleImport) {
-                        const { file } = state;
-                        const styleSheetIdentifiers = file.get('styleSheetIdentifiers') || [];
-                        const cssModuleStylesheets = file.get('cssModuleStylesheets') || [];
-                        const allStyleSheetIdentifiers = [...styleSheetIdentifiers, ...cssModuleStylesheets];
                         let expression;
-                        // only one css file，由于样式文件合并，永远只有一个
-                        if (allStyleSheetIdentifiers.length === 1 && styleSheetIdentifiers.length === 1) {
-                            expression = `var ${STYLE_SHEET_NAME} = ${allStyleSheetIdentifiers[0].styleSheetName};\n`;
-                        }
-                        else if (allStyleSheetIdentifiers.length >= 1) {
-                            const params = allStyleSheetIdentifiers.reduce((current, next) => `${current},[${next.styleSheetName}, "${next.rawStyleSheetName || ''}"]`, '').slice(1);
-                            expression = `${MergeStylesFunction}\n
-              var ${STYLE_SHEET_NAME} = ${MERGE_STYLES_FUNC_NAME}(${params});\n`;
+                        if (!isThemeChange) {
+                            const { file } = state;
+                            const styleSheetIdentifiers = file.get('styleSheetIdentifiers') || [];
+                            const cssModuleStylesheets = file.get('cssModuleStylesheets') || [];
+                            const allStyleSheetIdentifiers = [...styleSheetIdentifiers, ...cssModuleStylesheets];
+                            if (allStyleSheetIdentifiers.length === 1 && styleSheetIdentifiers.length === 1) {
+                                expression = `var ${STYLE_SHEET_NAME} = ${allStyleSheetIdentifiers[0].styleSheetName}('${duxappConfig.themeConfig.default}');\n`;
+                            }
+                            else if (allStyleSheetIdentifiers.length >= 1) {
+                                const params = allStyleSheetIdentifiers.reduce((current, next) => `${current},[${next.styleSheetName}('${duxappConfig.themeConfig.default}'), "${next.rawStyleSheetName || ''}"]`, '').slice(1);
+                                expression = `${MergeStylesFunction}\n
+                var ${STYLE_SHEET_NAME} = ${MERGE_STYLES_FUNC_NAME}(${params});\n`;
+                            }
+                            else {
+                                expression = `var ${STYLE_SHEET_NAME} = {}`;
+                            }
                         }
                         else {
-                            expression = `var ${STYLE_SHEET_NAME} = {}`;
+                            expression = `${MergeStylesFunction}\n
+                          var ${STYLE_SHEET_NAME} = {}\n
+                          var ${USE_THEME_MODE_NAME}`;
                         }
                         const expressionAst = template.ast(expression);
                         lastImportAstPath.insertAfter(expressionAst);
@@ -367,6 +503,10 @@ function default_1(babel) {
                             node.body.splice(++lastImportIndex, 0, template(functionTemplate)());
                         });
                     }
+                    if (existStyleImport && isThemeChange) {
+                        // @ts-ignore
+                        node.body.splice(++lastImportIndex, 0, useThemeFunctionStmt);
+                    }
                     existStyleImport = false;
                 }
             },
@@ -410,6 +550,9 @@ function default_1(babel) {
                     });
                 }
             },
+            FunctionDeclaration: tryInsertHook,
+            FunctionExpression: tryInsertHook,
+            ArrowFunctionExpression: tryInsertHook
         }
     };
 }
